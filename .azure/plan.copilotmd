# Azure Deployment Plan for forest-fire-prediction Project

## **Goal**
Deploy the Forest Fire Prediction Flask app to Azure App Service using Azure Developer CLI (azd).

## **Project Information**
**Forest Fire Prediction API**
- **Stack**: Python 3.9+ with Flask
- **Type**: ML-powered REST API for forest fire risk prediction using Ridge Regression
- **Dependencies**: Flask, numpy, pandas, scikit-learn
- **Models**: Ridge regressor and StandardScaler (pickle files in Models/ folder)
- **Hosting**: Azure App Service

## **Azure Resources Architecture**
```mermaid
graph TD
svcapi["`Forest Fire API
Path: e:/Forest Fire Prediction
Language: python`"]
subgraph "Compute Resources"
azappservice("`forest-fire-api
Azure App Service`")
end
subgraph "Observability"
appinsights("`Application Insights`")
logs("`Log Analytics Workspace`")
end
svcapi --> |"hosted on"| azappservice
azappservice --> |"logs to"| logs
azappservice --> |"monitored by"| appinsights
```

**Architecture Overview:**
- The Flask app is hosted on Azure App Service, which serves API requests from the static GitHub Pages frontend.
- Application Insights monitors the app health and performance.
- Log Analytics Workspace collects all app logs for debugging.

## **Recommended Azure Resources**

### Application: forest-fire-prediction
- **Hosting Service Type**: Azure App Service
- **SKU**: B1 (Basic) - 1 vCPU, 1.75 GB RAM (suitable for low-traffic ML inference)
- **Configuration**:
    - **Language**: python
    - **Runtime Stack**: Python 3.9
    - **Environment Variables**:
      - `FLASK_ENV=production`
      - `FLASK_APP=application.py`
- **Dependencies**: None (models bundled with app)

### Supporting Services
- **Application Insights**: Standard tier for performance monitoring
- **Log Analytics Workspace**: For centralized logging and debugging
- **User-Assigned Managed Identity**: For secure Azure resource access (future extensions)

## **Recommended Security Configurations**
- Enable HTTPS (App Service provides free SSL by default)
- CORS headers configured on Flask app to accept requests from GitHub Pages domain
- Managed Identity for future Key Vault/database integrations

## **Execution Steps**

### 1. Create Azure Infrastructure Files
- [ ] Check if `.azure/`, `infra/main.bicep`, `azure.yaml` exist
- [ ] If not, generate them using azd init template
- [ ] Generate `infra/main.bicep` with App Service + Application Insights + Log Analytics
- [ ] Generate `azure.yaml` for azd configuration

### 2. Environment Setup
- [ ] Install Azure CLI and azd if not present
- [ ] Run `azd auth login` to authenticate
- [ ] Run `azd env new <envName>` to create deployment environment
- [ ] Set subscription ID: `azd env set AZURE_SUBSCRIPTION_ID <your-sub-id>`
- [ ] Set resource group: `azd env set AZURE_RESOURCE_GROUP forest-fire-rg`
- [ ] Set region: `azd env set AZURE_LOCATION eastus`

### 3. Deployment
- [ ] Run `azd provision --preview` to preview infrastructure
- [ ] Run `azd up` to provision and deploy
- [ ] Verify app is running with `appmod-get-azd-app-logs`

### 4. Post-Deployment
- [ ] Get Azure App Service URL from deployment output
- [ ] Update `templates/predict_datapoint.html` to call the live API endpoint
- [ ] Test predictions via the GitHub Pages site
- [ ] Summarize deployment results

## **Progress Tracking**
- Tracking file: `.azure/progress.copilotmd`
- Updates after each major step
